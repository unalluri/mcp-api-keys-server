version: '3.8'

services:
  mcp-api-keys:
    build:
      context: .
      dockerfile: Dockerfile
    image: mcp-api-keys-server:latest
    container_name: mcp-api-keys-server

    # Load environment variables from .env file
    env_file:
      - .env

    # Or explicitly define environment variables
    # environment:
    #   # LLM APIs
    #   - OPENAI_API_KEY=${OPENAI_API_KEY}
    #   - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    #   - GOOGLE_AI_API_KEY=${GOOGLE_AI_API_KEY}
    #   - COHERE_API_KEY=${COHERE_API_KEY}
    #
    #   # SaaS APIs
    #   - STRIPE_API_KEY=${STRIPE_API_KEY}
    #   - STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
    #   - TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
    #   - TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
    #   - SENDGRID_API_KEY=${SENDGRID_API_KEY}
    #   - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
    #   - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
    #
    #   # Canva APIs
    #   - CANVA_CLIENT_ID=${CANVA_CLIENT_ID}
    #   - CANVA_CLIENT_SECRET=${CANVA_CLIENT_SECRET}
    #   - CANVA_APP_ID=${CANVA_APP_ID}
    #
    #   # Internal/Custom
    #   - DATABASE_URL=${DATABASE_URL}
    #   - REDIS_URL=${REDIS_URL}
    #   - JWT_SECRET=${JWT_SECRET}
    #   - APP_SECRET=${APP_SECRET}

    # MCP servers use stdin/stdout, keep container running
    stdin_open: true
    tty: true

    # Restart policy
    restart: unless-stopped

    # Resource limits (optional)
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.5'
